@model EmployeeManagement.Models.User

@{
    ViewData["Title"] = "Delete User";
}

<h2>Delete User</h2>

<h3>Are you sure you want to delete this User?</h3>

<div>
    <h4>Employee</h4>
    <dl class="row">
        <dt class="col-sm-2">ID</dt>
        <dd class="col-sm-10">@Model.ID</dd>

        <dt class="col-sm-2">First Name</dt>
        <dd class="col-sm-10">@Model.FirstName</dd>

        <dt class="col-sm-2">Last Name</dt>
        <dd class="col-sm-10">@Model.LastName</dd>

        <dt class="col-sm-2">User Name</dt>
        <dd class="col-sm-10">@Model.UserName</dd>

        <dt class="col-sm-2">RoleId</dt>
        <dd class="col-sm-10">@Model.Role</dd>
    </dl>
    <form id="deleteForm" data-url="@Url.Action("DeleteConfirmed", "Users")">
        <input type="hidden" asp-for="ID" />
        <div class="form-group">
            <button type="button" id="deleteButton" class="btn btn-danger">Delete</button>
            <a href="@Url.Action("Index", "Users")" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#deleteButton').click(function (event) {
                event.preventDefault();

                var form = $('#deleteForm');
                var url = form.data('url');
                var id = form.find('input[name="ID"]').val();


                $.ajax({
                    url: url,
                    type: 'POST',
                    data: {
                        ID: id
                    },
                    success: function (result) {
                        window.location.href = '@Url.Action("Index", "Users")';
                    },
                    error: function (xhr, status, error) {
                        alert('An error occurred while processing your request.');
                    }
                });
            });
        });
    </script>

</div>